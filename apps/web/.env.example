# Database Configuration
DATABASE_URL=postgresql://user:password@localhost:5432/pagespace

# Authentication & Security
JWT_SECRET=generate_a_secure_64_character_hex_string_here
JWT_ISSUER=pagespace
JWT_AUDIENCE=pagespace-users

# CSRF Protection
CSRF_SECRET=generate_another_secure_64_character_hex_string_here

# Encryption (for API keys, etc.)
ENCRYPTION_KEY=generate_yet_another_secure_64_character_hex_string_here

# Application URLs
# WEB_APP_URL is also used for Origin header validation (CSRF defense-in-depth)
WEB_APP_URL=http://localhost:3000
NEXT_PUBLIC_REALTIME_URL=http://localhost:3001
INTERNAL_REALTIME_URL=http://localhost:3001

# Port Configuration
PORT=3001

# CORS Configuration
CORS_ORIGIN=http://localhost:3000

# Origin Validation (Defense-in-Depth for CSRF Protection)
# Primary allowed origin is WEB_APP_URL (set above)
# Additional allowed origins for multi-domain deployments (comma-separated, optional)
# Example: ADDITIONAL_ALLOWED_ORIGINS=https://admin.example.com,https://app.example.com
# ADDITIONAL_ALLOWED_ORIGINS=
# Origin validation mode for API middleware:
# - "block": Reject requests from unexpected origins with 403 (default - secure by default)
# - "warn": Log warnings for unexpected origins but allow requests (opt-in for debugging only)
# NOTE: Bearer token requests (MCP, mobile, curl) without Origin header are always allowed.
ORIGIN_VALIDATION_MODE=block

# AI Integration
NEXT_PUBLIC_OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_BASE_URL=http://localhost:11434

# MCP Integration (Optional - for AI assistant integration)
# PAGESPACE_API_URL=http://localhost:3000
# PAGESPACE_AUTH_TOKEN=your_mcp_token_here

# Default PageSpace AI Provider (Now uses Google AI - Gemini 2.5 Flash)
# This provides Gemini 2.5 Flash as the default AI model for all users
# Replace with your own Google AI API key for the default "PageSpace" provider
# Get your API key from: https://aistudio.google.com/apikey
GOOGLE_AI_DEFAULT_API_KEY=your_google_ai_api_key_here

# Legacy OpenRouter provider (optional - for backwards compatibility)
# OPENROUTER_DEFAULT_API_KEY=your_default_openrouter_key_here

# AI Provider Keys (Optional - Users can add their own keys via the UI)
# OPENAI_API_KEY=your_openai_key_here
# ANTHROPIC_API_KEY=your_anthropic_key_here
# GOOGLE_AI_API_KEY=your_google_ai_key_here
# OPENROUTER_API_KEY=your_openrouter_key_here

# Google OAuth Configuration
# Get these from Google Cloud Console: https://console.cloud.google.com/
GOOGLE_OAUTH_CLIENT_ID=your_google_oauth_client_id_here
GOOGLE_OAUTH_CLIENT_SECRET=your_google_oauth_client_secret_here
GOOGLE_OAUTH_REDIRECT_URI=http://localhost:3000/api/auth/google/callback
# Google Calendar integration redirect URI (must also be registered in Google Cloud Console)
GOOGLE_CALENDAR_REDIRECT_URI=http://localhost:3000/api/integrations/google-calendar/callback
# Client-side Google OAuth Client ID (required for Google One Tap)
# This should be the same as GOOGLE_OAUTH_CLIENT_ID but exposed to the browser
NEXT_PUBLIC_GOOGLE_OAUTH_CLIENT_ID=your_google_oauth_client_id_here
# iOS OAuth Client ID (for native iOS app authentication)
# Create a separate iOS client in Google Cloud Console with your iOS bundle ID
GOOGLE_OAUTH_IOS_CLIENT_ID=your_google_oauth_ios_client_id_here

# OAuth State Parameter Signing
# Generate a secure random value with: openssl rand -hex 32
# This prevents tampering with OAuth state during the redirect flow
# REQUIRED for production deployment
OAUTH_STATE_SECRET=your_secret_key_here_min_64_chars

# Monitoring ingest configuration
MONITORING_INGEST_KEY=generate_a_secure_monitoring_key
MONITORING_INGEST_PATH=/api/internal/monitoring/ingest

# Logging configuration
LOG_LEVEL=info
LOG_DESTINATION=both
LOG_BATCH_SIZE=50
LOG_FLUSH_INTERVAL=5000
